
<html>
<head>
<meta charset="utf-8"/>
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <link rel="stylesheet" type="text/css" href="cinema.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  
<title></title>


</head>
<body >

<script>
var btn1 = false;
var btn2 = false;
function product(Availability, price, coll, Availability2) {
    				this.Availability = Availability;
   					this.price = price;
   					this.coll = colCounter;
   					this.Availability2 = Availability2;  				 
   }
var products = []; 


	if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
	  xmlhttp=new XMLHttpRequest();
	}
	else {// code for IE6, IE5
	  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.open("GET","../XML/cinema.xml",false);
	xmlhttp.send();
	xmlDoc=xmlhttp.responseXML; 
	var x=xmlDoc.getElementsByTagName("row");
	
	console.log(x);
	var pName=' ';
	var pPrice=0;
	var Price1=0;
	var colCounter=0;
	
	for (i=0; i<x.length; i++) { 		
		pName=x[i].getElementsByTagName("Availability")[0].childNodes[0].nodeValue;
		pPrice=Number(x[i].getElementsByTagName("price")[0].childNodes[0].nodeValue);
	colCounter=Number(x[i].getElementsByTagName("col")[0].childNodes[0].nodeValue);
		ava=x[i].getElementsByTagName("AvailabilityTab2")[0].childNodes[0].nodeValue;

	var prod =new product(pName,pPrice,colCounter,ava);
		products[i]=prod;
	}
		// TABLE 2 XML LOAD
	var seats=[];
	var ava=' ';
	var pri=0;
	
	var colcount=0;
	var y = "";

	if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
	  xmlhttp=new XMLHttpRequest();
	}
	else {// code for IE6, IE5
	  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.open("GET","../XML/cinema2.xml",false);
	xmlhttp.send();
	xmlDoc=xmlhttp.responseXML; 
	y=xmlDoc.getElementsByTagName("row");
	
	console.log(x);
	
	for (i=0; i<y.length; i++) { 		
		ava=y[i].getElementsByTagName("Availability")[0].childNodes[0].nodeValue;
		pri=Number(y[i].getElementsByTagName("price")[0].childNodes[0].nodeValue);
	colcount=Number(y[i].getElementsByTagName("col")[0].childNodes[0].nodeValue);
	ava2=y[i].getElementsByTagName("Availability2")[0].childNodes[0].nodeValue;


	var arg = new seat(ava,pri,colcount,ava2);
		seats[i]=arg;
	}

	

	function getName(price,c){

	var x = c.innerHTML;
	var totalshow;
	var totalSeats;

	 var result = document.getElementById("totalCost").value;
	// if (c.style.backgroundColor=="red"){
	 //	c.style.backgroundColor="white";
	 if (c.className == "colorChng")
	 { 
	 	c.className = "colorChng1"
	  totalshow = parseInt(result) - parseInt(price);
	 
	document.getElementById("price").value =  document.getElementById("price").value.replace(price+",", "");	 
	 	document.getElementById("seats").value =document.getElementById("seats").value.replace(x+ ",", "");

	 }
	 else {
	 	//c.style.backgroundColor="red"
	 	c.className = "colorChng"
	 	document.getElementById("price").value +=  price +',';
	 
	 	document.getElementById("seats").value += x + ',';
	 totalshow = parseInt(price) + parseInt(result);
	

	 }

	document.getElementById("totalCost").value =  totalshow;

	document.getElementById("hide").style.display = "block";
	}


function show_products() {

	var table = document.getElementById('tabel1');
	 var table1 = document.getElementById('tabel2');
if (btn1 == false)
{
	var displaytext='';
	// var table = document.getElementById('tabel1');
	// var table1 = document.getElementById('tabel2');
	document.getElementById("img1").style.display= "contents";
	//document.getElementById("button1").style.display = "none";
	document.getElementById("signImg").style.display= "contents";
	document.getElementById("signImg2").style.display= "contents";
	btn1 = true;

	var row1Flag = true; var row2Flag = true; var row3Flag = true;
	var row4Flag = true; var row5Flag = true;
	var row6Flag = true; var row7Flag = true; row8Flag = true;

var seatChar ="";
var seatChar1 = "";
	
	for(var i=0; i < products.length; i++ ){
		var row;
		var row1;
		
		
		if(products[i].price=="20" && row1Flag  && products[i].coll=="0"){ 
			
			row = table.insertRow(0);
			row1 = tabel2.insertRow(0);
			seatChar = "A";
			seatChar1 = "I";
			
			row1Flag = false;
		} 

		if(products[i].price=="20" && row2Flag && products[i].coll=="1"){
			
			row = table.insertRow(1);
			row1 = tabel2.insertRow(1);
			seatChar = "B";
			seatChar1 = "J";
			row2Flag = false;

		}
		if(products[i].price=="22" && row3Flag && products[i].coll=="2"){
			row = table.insertRow(2);
			row1 = tabel2.insertRow(2);
			seatChar = "C";
			seatChar1 = "K";
			row3Flag = false;
			
		}
		if(products[i].price=="22" && row4Flag && products[i].coll=="3"){
			row = table.insertRow(3);
			row1 = tabel2.insertRow(3);
			seatChar = "D";
			seatChar1 = "L";
			row4Flag = false;
		}


		if(products[i].price=="22" && row5Flag && products[i].coll=="4"){
			row = table.insertRow(4);
			row1 = tabel2.insertRow(4);
			seatChar = "E";
			seatChar1 = "M";
			row5Flag = false;
		}

		if(products[i].price=="25" && row6Flag && products[i].coll=="5"){
			row = table.insertRow(5);
			row1 = tabel2.insertRow(5);
			seatChar = "F";
			seatChar1 = "N";
			row6Flag = false;
		}
		if(products[i].price=="25" && row7Flag && products[i].coll=="6"){
			row = table.insertRow(6);
			row1 = tabel2.insertRow(6);
			seatChar = "G";
			seatChar1 = "O";
			row7Flag = false;
		}

		if(products[i].price=="25" && row8Flag && products[i].coll=="7"){
			row = table.insertRow(7);
			row1 = tabel2.insertRow(7);
			seatChar = "H";
			seatChar1 = "P";
			row8Flag = false;
		}
		
		var cell1 = row.insertCell(0);
		var cell2 = row1.insertCell(0);

	
			// TABEL 2
		
		var cellName ='s'+i;
		cell1.setAttribute('id', cellName);
		cell1.setAttribute('value',products[i].Availability);

		var char = document.getElementById(cellName).innerHTML = seatChar + i;
		//cell1.setAttribute('onclick','getName(' + products[i].price+"," + "this"+')');
		if (products[i].Availability==" no "){
			//cell1 is disabled 
			//color this cell red
			cell1.setAttribute('style','background-color:red;');
			//x[j].style.backgroundColor="red";
		}
		else
		{
			cell1.setAttribute('onclick','getName(' + products[i].price+"," + "this"+')');

      }

		//debugger;
		//var char = document.getElementById(cellName).innerHTML = seatChar + i;
		var cellN = 'b' + i;
		cell2.setAttribute('id', cellN);
		document.getElementById(cellN).innerHTML = seatChar1 + i;
		cell2.setAttribute('value',products[i].Availability2);

		if (products[i].Availability2==" no "){
			//cell1 is disabled 
			//color this cell red
			cell2.setAttribute('style','background-color:red;');
			//x[j].style.backgroundColor="red";iwd
		}
		else
		{
			cell2.setAttribute('onclick','getName(' + products[i].price+"," + "this"+')');

      }
		
}

			
}

}


function color(){
		 	// var x = document.getElementsByTagName("td");
		 	// for (var j = 0 ; j < x.length; j++){
		 	// 	if (x[j].getAttribute("value")==" no "){
		 	// 		x[j].style.backgroundColor="red";
		 			
		 	// 	}
		 	// }
		 }

function disp()
{show_products();
	if (btn1 == true){
		//document.getElementById("button1").innerHTML = "CLOSE"
	}
 color();
}








function seat(Avail, p, col, Avail2) {
    				this.Avail = Avail;
   					this.p = p;
   					this.col = col;
   					this.Avail2 = Avail2;
}


function show_cinema(){
	if (btn2 == false)
	{
		var displaytext='';
		btn2 = true;
		document.getElementById("img2").style.display= "contents";
		//document.getElementById("button2").style.display="none";
		 
	


	var table = document.getElementById('tabel3');
	var table2 = document.getElementById('tabel4');
	
	
	
	var row1Flag = true; var row2Flag = true; var row3Flag = true;
	var row4Flag = true; var row5Flag = true;
	var row6Flag = true; var row7Flag = true; row8Flag = true;
	row9Flag = true;  row10Flag = true;
var seatChar ="";
	
	for(var j=0; j < seats.length; j++ ){
		var row;
		var row1;
	



		if(seats[j].p=="20" && row1Flag  && seats[j].col=="0"){ 
			
			row = table.insertRow(0);
			row1 = tabel4.insertRow(0);
			
			seatChar = "A";
			
			row1Flag = false;
		} 
		

		if(seats[j].p=="20" && row2Flag && seats[j].col=="1"){
			
			row = table.insertRow(1);
			row1 = tabel4.insertRow(1);
			
			seatChar = "B";
			row2Flag = false;

		}
		if(seats[j].p=="22" && row3Flag && seats[j].col=="2"){
			row = table.insertRow(2);
			row1 = tabel4.insertRow(2);
			seatChar = "C";
			row3Flag = false;
			
		}
		if(seats[j].p=="22" && row4Flag && seats[j].col=="3"){
			row = table.insertRow(3);
			row1 = tabel4.insertRow(3);
			seatChar = "D";
			row4Flag = false;
		}


		if(seats[j].p=="22" && row5Flag && seats[j].col=="4"){
			row = table.insertRow(4);
			row1 = tabel4.insertRow(4);
			seatChar = "E";
			row5Flag = false;
		}

		if(seats[j].p=="25" && row6Flag && seats[j].col=="5"){
			row = table.insertRow(5);
			row1 = tabel4.insertRow(5);
			seatChar = "F";
			row6Flag = false;
		}
		if(seats[j].p=="25" && row7Flag && seats[j].col=="6"){
			row = table.insertRow(6);
			row1 = tabel4.insertRow(6);
			seatChar = "G";
			row7Flag = false;
		}
		if(seats[j].p=="25" && row8Flag && seats[j].col=="7"){
			row = table.insertRow(7);
			row1 = tabel4.insertRow(7);
			seatChar = "H";
			row8Flag = false;
		}
		if(seats[j].p=="25" && row9Flag && seats[j].col=="8"){
			row = table.insertRow(8);
			row1 = tabel4.insertRow(8);
			seatChar = "I";
			row9Flag = false;
		}
		if(seats[j].p=="25" && row10Flag && seats[j].col=="9"){
			row = table.insertRow(9);
			row1 = tabel4.insertRow(9);
			seatChar = "J";
			row10Flag = false;
		}
		

		
		var cell3 = row.insertCell(0);
		var cell4 = row1.insertCell(0);

		//cell3.innerHTML = seats[j].p;
		//cell4.innerHTML = seats[j].p;
		
		
		var cellName ='d'+j;
		cell3.setAttribute('id', cellName);

		document.getElementById(cellName).innerHTML=seatChar + j;
		
		var cellN = 'e' + j;
		cell4.setAttribute('id', cellN);
	document.getElementById(cellN).innerHTML=seatChar + j;
		

		cell3.setAttribute('value',seats[j].p);
		cell4.setAttribute('value',seats[j].p);

		if (seats[j].Avail==" no "){
			//cell1 is disabled 
			//color this cell red
			cell3.setAttribute('style','background-color:red;');
			//x[j].style.backgroundColor="red";
		}
		else
		{
			cell3.setAttribute('onclick','getName(' + seats[j].p+"," + "this"+')');

      }

		//debugger;
		//var char = document.getElementById(cellName).innerHTML = seatChar + i;
		
		cell4.setAttribute('value',seats[j].Avail2);

		if (seats[j].Avail2==" no "){
			//cell1 is disabled 
			//color this cell red
			cell4.setAttribute('style','background-color:red;');
			//x[j].style.backgroundColor="red";iwd
		}
		else
		{
			cell4.setAttribute('onclick','getName(' + seats[j].p+"," + "this"+')');

      }
		
		}
	}
	else{

	}
	}

function disp2()
{show_cinema();
 color();
}


 //background: linear-gradient(to right, rgba(255,0,0,0), rgba(255,0,0,1));

 //style="background-image: url(banner1.jpg);background-size: cover;

</script>

<div>
<div class="jumbotron" align="center" style="background: linear-gradient(to right, rgba(255,0,0,0), rgba(255,0,0,1));">
 <button type="button" onclick="javascript :history.back(-1);"">Go Back</button></br></br>
 <h1>Welome to Booking Page</h1>
 <p>Please use FireFox browser to book the tickets</p>
 <a href="#demo" class="btn btn-info" data-toggle="collapse" style="background-color:#898276"><span class="glyphicons glyphicons-info-sign"></span>More Info!</a>
  <div id="demo" class="collapse">
    <p>Click on any button to pop down seating arrangement.</p>
    <p>To book any seat simply click on the desired seat you wish.</p>
    <p>Prices of each seat differs, click on the seat to know the price.</p>
    <p>Red seats are noted as booked.</p>
  </div>
</div>

<button type="button" onclick="disp()" id="button1">Cinema Florence Room</button>
<button type="button" onclick="disp2()" id="button2">Cinema Ronald room</button>
<img src="../images/screen.png" id="img1">
</div>
<div id="div1">
<img src="../images/This.png" id="signImg">
<table border='1' id="tabel1">
</table>
</div>
<div id="div2">
<img src="../images/This.png" id="signImg2">
<table border='1' id="tabel2" style="float: left;">
</table>
</div>

<div id="hide" style="display: none;">
<label style="margin-left: 480px">Price Per Seat $:</label><input type="text" id='price' class="inputStyle" readonly></br>
<label style="margin-left: 525px">Seat No: </label><input type="text" id="seats" class="inputStyle" readonly></br>

<label style="margin-left: 500px">Total Cost $: </label><input type="text" id='totalCost' value="0" class="inputStyle" readonly>
</div>

<div>
	<!-- <button type="button" onclick="disp2()" id="button2">Cinema Ronald room</button> -->
	<img src="../images/screen.png" id="img2">

	</div>
	<div id="div3">
	<!-- <img src="images/this.png" id="signImg3"> -->
<table border='1' id="tabel3">
</table>
</div>


<div id="div4">
<!-- <img src="images/this.png" id="signImg4"> -->
<table border='1' id="tabel4">
</table>
</div>

</body>
</html>